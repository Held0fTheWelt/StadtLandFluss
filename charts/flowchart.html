<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stadt-Land-Fluss: Programmablaufplan</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #dee2e6;
        }

        .tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            border: none;
            background: none;
            font-size: 1.1em;
            font-weight: 600;
            color: #6c757d;
            transition: all 0.3s ease;
        }

        .tab:hover {
            background: #e9ecef;
            color: #495057;
        }

        .tab.active {
            background: white;
            color: #667eea;
            border-bottom: 3px solid #667eea;
        }

        .tab-content {
            display: none;
            padding: 40px;
            animation: fadeIn 0.5s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .legend {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .legend h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 5px;
        }

        .legend-color {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            margin-right: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .info-box {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .info-box h3 {
            margin-bottom: 10px;
            font-size: 1.5em;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card h4 {
            font-size: 0.9em;
            opacity: 0.9;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stat-card .value {
            font-size: 2.5em;
            font-weight: bold;
            margin: 10px 0;
        }

        code {
            background: #f8f9fa;
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: #e83e8c;
        }

        .mermaid {
            background: #fefefe;
            padding: 30px;
            border-radius: 12px;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        footer {
            background: #343a40;
            color: white;
            text-align: center;
            padding: 20px;
        }

        .flow-description {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .flow-description h4 {
            color: #856404;
            margin-bottom: 10px;
        }

        ul {
            margin-left: 20px;
            line-height: 1.8;
        }

        li {
            margin: 8px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üèôÔ∏èüåçüåä Stadt-Land-Fluss</h1>
            <p>Interaktiver Programmablaufplan mit Zwei-Loop-Architektur</p>
        </header>

        <div class="tabs">
            <button class="tab active" onclick="showTab('overview')">üìä √úbersicht</button>
            <button class="tab" onclick="showTab('detailed')">üîç Detailliert</button>
            <button class="tab" onclick="showTab('stats')">üìà Statistiken</button>
        </div>

        <div id="overview" class="tab-content active">
            <h2>üéØ Zwei-Loop-Architektur</h2>
            
            <div class="info-box">
                <h3>üí° Konzept</h3>
                <p>Das Programm verwendet zwei ineinander verschachtelte Loops:</p>
                <ul>
                    <li><strong>√ÑUSSERER APP LOOP:</strong> H√§lt die Anwendung am Leben und verwaltet das Hauptmen√º</li>
                    <li><strong>INNERER GAME LOOP:</strong> F√ºhrt eine einzelne Spielrunde durch</li>
                </ul>
            </div>

            <div class="mermaid">
flowchart TD
    Start([START]) --> Load[Highscore laden]
    Load --> Greeting[Begr√º√üung]
    Greeting --> AppLoop{{"üîÑ APP LOOP"}}
    
    AppLoop --> Menu[Men√º anzeigen<br/>1-Play 2-HS 3-Help 4-Exit]
    Menu --> Choice{User-Auswahl?}
    
    Choice -->|1-Play| GameLoop{{"‚ö° GAME LOOP"}}
    Choice -->|2-HS| ShowHS[Highscore zeigen]
    Choice -->|3-Help| ShowRules[Regeln zeigen]
    Choice -->|4-Exit| Exit[Verabschiedung]
    
    GameLoop --> GenChar[Buchstabe A-Z]
    GenChar --> Timer[‚è±Ô∏è Timer Start]
    Timer --> Input[Input: Stadt/Land/Fluss]
    Input --> Check[‚úì Wikipedia-Check]
    Check --> Calc[üìä Punkte + Bonus]
    Calc --> Name[Name abfragen]
    Name --> Save[üíæ Speichern]
    Save --> GameEnd[Zur√ºck zum Men√º]
    
    GameEnd --> AppLoop
    ShowHS --> AppLoop
    ShowRules --> AppLoop
    Exit --> End([ENDE])
    
    classDef loopStyle fill:#667eea,stroke:#4c6ef5,stroke-width:3px,color:#fff
    classDef processStyle fill:#51cf66,stroke:#2f9e44,stroke-width:2px
    classDef endStyle fill:#ff6b6b,stroke:#c92a2a,stroke-width:2px,color:#fff
    
    class AppLoop,GameLoop loopStyle
    class GenChar,Timer,Input,Check,Calc,Name,Save processStyle
    class Exit,End endStyle
            </div>

            <div class="legend">
                <h3>üé® Legende</h3>
                <div class="legend-item">
                    <div class="legend-color" style="background: #667eea;"></div>
                    <div>
                        <strong>Loops (Blau)</strong><br>
                        Wiederholende Programmstrukturen
                    </div>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #51cf66;"></div>
                    <div>
                        <strong>Prozesse (Gr√ºn)</strong><br>
                        Aktionen und Berechnungen
                    </div>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #ff6b6b;"></div>
                    <div>
                        <strong>Ende-Punkte (Rot)</strong><br>
                        Programm-Beendigung
                    </div>
                </div>
            </div>

            <div class="flow-description">
                <h4>üîÑ √ÑUSSERER APP LOOP</h4>
                <ul>
                    <li><strong>Datei:</strong> <code>main.py</code></li>
                    <li><strong>Funktion:</strong> <code>main()</code></li>
                    <li><strong>Typ:</strong> <code>while True</code> Loop</li>
                    <li><strong>Zweck:</strong> Erm√∂glicht mehrere Spielrunden ohne Neustart</li>
                    <li><strong>Exit-Bedingung:</strong> User w√§hlt "4 - Exit"</li>
                </ul>
            </div>

            <div class="flow-description" style="background: #d1ecf1; border-color: #0c5460;">
                <h4 style="color: #0c5460;">‚ö° INNERER GAME LOOP</h4>
                <ul>
                    <li><strong>Datei:</strong> <code>backend.py</code></li>
                    <li><strong>Funktion:</strong> <code>play()</code></li>
                    <li><strong>Typ:</strong> Einmaliger Durchlauf (kein expliziter Loop)</li>
                    <li><strong>Zweck:</strong> F√ºhrt eine komplette Spielrunde durch</li>
                    <li><strong>R√ºckkehr:</strong> Automatisch zum App Loop nach Abschluss</li>
                </ul>
            </div>
        </div>

        <div id="detailed" class="tab-content">
            <h2>üîç Detaillierter Ablauf mit Error-Handling</h2>
            
            <div class="info-box">
                <h3>üõ°Ô∏è Robustes Error-Handling</h3>
                <p>Jeder kritische Punkt ist mit try-except-Bl√∂cken gesch√ºtzt. Das Programm kann nicht crashen!</p>
            </div>

            <div class="mermaid">
flowchart TD
    Start([START]) --> LoadHS[Highscore laden]
    LoadHS --> CheckLoad{Laden<br/>erfolgreich?}
    CheckLoad -->|Ja| Greeting[Begr√º√üung]
    CheckLoad -->|FileNotFoundError| CreateNew[Neue Liste erstellen]
    CheckLoad -->|JSONDecodeError| CreateNew
    CreateNew --> Greeting
    
    Greeting --> AppLoop{{"üîÑ APP LOOP"}}
    AppLoop --> ShowMenu[Men√º anzeigen]
    ShowMenu --> GetInput[User-Input]
    GetInput --> Validate{G√ºltige<br/>Eingabe?}
    Validate -->|Nein| ErrorMsg[Fehlermeldung]
    ErrorMsg --> AppLoop
    Validate -->|Ja| Choice{Auswahl?}
    
    Choice -->|1-Play| GameStart[["‚ö° GAME LOOP START"]]
    Choice -->|2| ShowHS[Highscore anzeigen]
    Choice -->|3| ShowHelp[Hilfe anzeigen]
    Choice -->|4| ExitApp[Programm beenden]
    
    GameStart --> GenChar[Buchstabe generieren]
    GenChar --> TimerStart[Timer starten]
    TimerStart --> InputStadt[Input: Stadt]
    InputStadt --> CheckAbort1{Abbruch?}
    CheckAbort1 -->|Ctrl+C/EOF| AbortGame[Spiel abgebrochen]
    CheckAbort1 -->|Nein| InputLand[Input: Land]
    InputLand --> CheckAbort2{Abbruch?}
    CheckAbort2 -->|Ctrl+C/EOF| AbortGame
    CheckAbort2 -->|Nein| InputFluss[Input: Fluss]
    InputFluss --> CheckAbort3{Abbruch?}
    CheckAbort3 -->|Ctrl+C/EOF| AbortGame
    CheckAbort3 -->|Nein| TimerStop[Timer stoppen]
    
    TimerStop --> ValidStadt[Wikipedia: Stadt?]
    ValidStadt --> ValidLand[Wikipedia: Land?]
    ValidLand --> ValidFluss[Wikipedia: Fluss?]
    ValidFluss --> CalcPoints[Punkte berechnen]
    CalcPoints --> CalcBonus[Bonus berechnen]
    CalcBonus --> InputName[Name abfragen]
    
    InputName --> CheckName{Name<br/>g√ºltig?}
    CheckName -->|Leer/Lang| NameError[Fehler: Erneut]
    NameError --> InputName
    CheckName -->|Abbruch| DefaultName[Name: Unbekannt]
    CheckName -->|G√ºltig| ValidName[Name gespeichert]
    
    ValidName --> UpdateHS[Highscore Update]
    DefaultName --> UpdateHS
    UpdateHS --> SaveHS[Speichern]
    SaveHS --> CheckSave{Speichern<br/>OK?}
    CheckSave -->|Ja| SaveOK[‚úì Erfolgreich]
    CheckSave -->|Nein| SaveErr[‚ö†Ô∏è Warnung]
    
    SaveOK --> GameEnd[["‚ö° GAME LOOP ENDE"]]
    SaveErr --> GameEnd
    AbortGame --> GameEnd
    GameEnd --> AppLoop
    
    ShowHS --> AppLoop
    ShowHelp --> AppLoop
    ExitApp --> FinalSave[Final: Speichern]
    FinalSave --> End([ENDE])
    
    classDef errorStyle fill:#ff6b6b,stroke:#c92a2a,stroke-width:2px,color:#fff
    classDef successStyle fill:#51cf66,stroke:#2f9e44,stroke-width:2px,color:#fff
    classDef warningStyle fill:#ffd43b,stroke:#fab005,stroke-width:2px
    classDef loopStyle fill:#667eea,stroke:#4c6ef5,stroke-width:3px,color:#fff
    
    class ErrorMsg,AbortGame,SaveErr,NameError errorStyle
    class SaveOK,ValidName successStyle
    class CreateNew,DefaultName warningStyle
    class AppLoop,GameStart,GameEnd loopStyle
            </div>

            <div class="legend">
                <h3>üé® Error-Handling-Status</h3>
                <div class="legend-item">
                    <div class="legend-color" style="background: #51cf66;"></div>
                    <div>
                        <strong>Erfolg (Gr√ºn)</strong><br>
                        Operation erfolgreich abgeschlossen
                    </div>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #ffd43b;"></div>
                    <div>
                        <strong>Warnung (Gelb)</strong><br>
                        Fehler abgefangen, Fallback verwendet
                    </div>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #ff6b6b;"></div>
                    <div>
                        <strong>Fehler (Rot)</strong><br>
                        Kritischer Fehler, aber graceful degradation
                    </div>
                </div>
            </div>
        </div>

        <div id="stats" class="tab-content">
            <h2>üìà Programm-Statistiken & Performance</h2>

            <div class="stats-grid">
                <div class="stat-card">
                    <h4>Zeilen Code</h4>
                    <div class="value">~650</div>
                    <p>Gesamt (alle Dateien)</p>
                </div>
                <div class="stat-card">
                    <h4>Funktionen</h4>
                    <div class="value">25+</div>
                    <p>√úber alle Module</p>
                </div>
                <div class="stat-card">
                    <h4>Error-Handler</h4>
                    <div class="value">15+</div>
                    <p>Try-Except-Bl√∂cke</p>
                </div>
                <div class="stat-card">
                    <h4>API-Calls</h4>
                    <div class="value">3x</div>
                    <p>Pro Spielrunde (Wikipedia)</p>
                </div>
            </div>

            <h3>‚è±Ô∏è Performance-Charakteristiken</h3>
            
            <div class="flow-description">
                <h4>Durchschnittliche Zeiten</h4>
                <ul>
                    <li><strong>Programmstart:</strong> ~0.2s (Highscore laden + Begr√º√üung)</li>
                    <li><strong>Men√º-Cycle:</strong> ~0.5s + User-Wartezeit</li>
                    <li><strong>Game Loop gesamt:</strong> 15-60s (abh√§ngig vom Spieler)</li>
                    <li><strong>Wikipedia-Checks:</strong> ~1.5s (3x ~0.5s parallel m√∂glich)</li>
                    <li><strong>Highscore-Speichern:</strong> <0.01s (JSON-I/O)</li>
                </ul>
            </div>

            <div class="flow-description" style="background: #f8d7da; border-color: #721c24;">
                <h4 style="color: #721c24;">üö¶ Bottlenecks</h4>
                <ul>
                    <li><strong>Wikipedia-API:</strong> 100-500ms Latenz pro Call (3x pro Runde)</li>
                    <li><strong>User-Input:</strong> Unvorhersehbare Wartezeiten</li>
                    <li><strong>Netzwerk-Timeout:</strong> Max 10 Sekunden pro Request</li>
                </ul>
            </div>

            <div class="flow-description" style="background: #d4edda; border-color: #155724;">
                <h4 style="color: #155724;">üí° Optimierungspotential</h4>
                <ul>
                    <li><strong>Parallele API-Calls:</strong> async/await f√ºr 3x schnellere Validierung</li>
                    <li><strong>Caching:</strong> H√§ufige Begriffe lokal speichern</li>
                    <li><strong>Local Wikipedia-Dump:</strong> Offline-Modus ohne Latenz</li>
                    <li><strong>Predictive Loading:</strong> N√§chste Buchstaben vorlade</li>
                </ul>
            </div>

            <h3>üìä Datenfluss</h3>
            
            <div class="mermaid">
flowchart LR
    JSON[(daten.json<br/>Highscore)] -->|Laden| AppLoop[App Loop]
    AppLoop -->|Play| GameLoop[Game Loop]
    GameLoop -->|Eingaben| Wiki[Wikipedia API]
    Wiki -->|Validation| GameLoop
    GameLoop -->|result| AppLoop
    AppLoop -->|Append| JSON
    
    style JSON fill:#ffd43b
    style Wiki fill:#ff6b6b,color:#fff
    style AppLoop fill:#667eea,color:#fff
    style GameLoop fill:#51cf66
            </div>

            <div class="info-box">
                <h3>üéØ Code-Qualit√§t</h3>
                <ul>
                    <li>‚úÖ <strong>Modular:</strong> Klare Trennung in 6 Module</li>
                    <li>‚úÖ <strong>Robust:</strong> 15+ Error-Handler verhindern Crashes</li>
                    <li>‚úÖ <strong>Wartbar:</strong> Klare Funktions-Signaturen</li>
                    <li>‚úÖ <strong>Testbar:</strong> Einzelne Funktionen isoliert testbar</li>
                    <li>‚úÖ <strong>Erweiterbar:</strong> Neue Features leicht integrierbar</li>
                </ul>
            </div>
        </div>

        <footer>
            <p>üè¥‚Äç‚ò†Ô∏è RIVER-PIRATES Entertainment¬Æ | Stadt-Land-Fluss Programmablaufplan</p>
            <p style="opacity: 0.7; margin-top: 10px;">Erstellt mit Mermaid.js | Interaktives Flowchart</p>
        </footer>
    </div>

    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                curve: 'basis',
                padding: 20
            }
        });

        function showTab(tabName) {
            // Hide all tabs
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.classList.remove('active'));
            
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }
    </script>
</body>
</html>
